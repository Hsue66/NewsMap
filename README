################################################################################
# TopicMap : Web application for visualizing a news map generated by TopicMaps
#
# Author: Sumin Hong (hsue0606@gmail.com),
#         U Kang (ukang@snu.ac.kr), Seoul National University
#
# Version : 1.0
# Date : Feb 28, 2019
# Main Contact: Sumin Hong
#
#
################################################################################


1. General information

TopicMap is a web application for visualizing news map generated by TopicMaps.
The Main page provides a brief introduction to this service. In the Search page, a user can select and display a map from a list that has already been created. In the SampleTest page, the user can visualize the result created by uploaded files. Finally, the user can also participate in the user study on the UserStudy page.



2. How to use TopicMap

Connect to 'datalab.snu.ac.kr/topicmap' from chrome or firefox.
- Main page : This page briefly describes what TopicMap is. You can check pre-generated maps by selecting from a list of search terms.
- Search page : On this page, You can see the TopicMap at a glance. You can click on the nodes to view the article content and zoom in and out by clicking on the cluster nodes.
- SampleTest page : You can directly upload the dataset file and the TopicMaps result file and can see the map created from the uploaded files.
- UserStudy page : If you have a given id from administrator, you can log in and participate in a user study.



3. How to run TopicMap
Before you use this, please unzip the TopicMap package and type ‘$ npm install’ on the command line. This will download the required node-modules from the TopicMap.
Node.js and Npm should be installed in your system in advance.

If you are not using user study, please comment out the code that connects to MongoDB in the app.js file and also comment out the href tag for user study tab in views/partial/nav.ejs. If you do not comment out these codes, you may have a problem loading the page when you access the user study page. Therefore, it is recommended to comment out the contents related to MongoDB for stable code modification.

If you use user study, you need to set up the MongoDB database. Please run the MongoDB server and connect to mongo to create nc-news database. and save the information of the people who will participate in user study in nc-news.users. This is done by running the following code in the terminal.
  $ sudo service mongod start 		// start mongodb server
  $ mongo					// run mongo shell
  > use nc-news				// create nc-news database
  > db.users.insert([{'id': 'user1', 'topic': 'pohang earthquake', 'nowflag': 0, 'dataset': ['pohang2.json', 'pohang1.json'], 'conflag': [1, 1]}]);	// insert user data to users collection in nc-news database

More information on the structure of the user collection can be found in development guide 4.2.7 user.js.
MongoDB should be installed in your system in advance.

To run TopicMap server, you need to do the followings:
  -	Change the port number in the app.js file to an available port number.
  -	On the command line, enter ‘$ node app.js’.
If you have modified the code, you should restart the server to see which server reflects the changes.

If you use nodemon, it will automatically restart the node application when file changes in the directory are detected. Therefore, I recommend using nodemon.
  -	On the command line, enter ‘$ nodemon app.js’
